import
	../future-low-level: is-completed, resolve, unresolved

dummy-future-tests nat64()
	0

# This tests 'shared-of-mut-lambda', which the compiler uses to implement 'shared' lambdas. TODO: that is no longer a 'future' matter .........
test
	out nat mut[] = ()
	f void shared(x nat) = shared x =>
		out ~= x
		()
	for x : 0::nat .. 10 parallel
		f[x]
	out.move-to.sort::nat[] is for x : 0::nat .. 10; x
	()

test trusted
	a nat future = unresolved
	b nat future = unresolved
	both (nat, nat) future = with : parallel
		a.await, b.await
	a resolve 1
	forbid both is-completed
	b resolve 2
	both.await is (1, 2)
	()
