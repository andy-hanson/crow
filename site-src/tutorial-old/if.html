<section>
	<h2>Functions</h2>

	Here's an example program that defines and calls a few functions.

	<crow-runnable>
		main nat^(_ string[]) summon
			info log ("albatross" greet "morning")
			info log ("fox" greet "afternoon")
			info log ("ox" greet "evening")
			info log ("crow" greet "night")
			()

		greet string(name string, time string)
			"{good} {time}, {name plural}"

		good string()
			"Good"

		plural string(name string)
			suffix = if name ends-with "s" || name == "fox"
				"es"
			elif name ends-with "x"
				"en"
			else
				"s"
			"{name}{suffix}"
	</crow-runnable>

	This program adds more function declarations than just <code class="fun">main</code>.

	<ul class="bullets">
		<li>
			<code>greet str(name str, time str)</code> is a function with 2 arguments.
			<br />
			It's called by <code>"albatross" greet "morning"</code>.
		</li>
		<li>
			<code>good str()</code> is a function with no arguments.
			<br />
			It's called by writing just <code>good</code>.
		</li>
		<li>
			<code>plural str(name str)</code> is a function with one argument.
			<br />
			It's called by <code>name plural</code>.
		</li>
	</ul>

	<h3>Local variables</h3>
	<p>
		<code class="fun">plural</code> has a local variable <code class="local">suffix</code>.
		The syntax is <code>name type = value</code>, but the type is optional if it can be inferred.
		Variables are immutable, meaning you can't write <code>suffix = "something-else"</code> if
		<code class="local">suffix</code> is already defined.
	</p>

	<h3>'if'</h3>
	<p>
		The value of <code class="local">suffix</code> is an <code class="keyword">if</code> expression.
		<br />
		The condition of an <code class="keyword">if</code> (or <code class="keyword">elif</code>)
		must fit on the same line and must be a <code class="struct">bool</code>.
		<br />
		The bodies of the <code class="keyword">if</code>, <code class="keyword">elif</code>,
		and <code class="keyword">else</code> must be indented.
	</p>

	<h3>string interpolation</h3>
	<p>
		In a string literal, <code>"{x}"</code> calls <code>x to-str</code> and inserts it into the string.
		<br />
		<code>x</code> can be any expression, like <code>name plural</code>.
	</p>

</section>
<section>
	<h2>More 'if'</h2>
	<crow-runnable>
		main nat^(_ string[]) summon
			info log "crow".describe
			info log "ermisepillo".describe
			()
		
		describe string(a string)
			"{a a-an} says {"-" join a.vowels}"
		
		vowels string[](a string)
			() join for c : a
				if c is-vowel
					"{c}",
		
		a-an string(a string)
			starts-with-vowel = !a.is-empty && a[0].is-vowel
			starts-with-vowel ? "an {a}" : "a {a}"
		
		is-vowel bool(a char8)
			a in vowels
		
		vowels char8 set()
			"a", "e", "i", "o", "u"
	</crow-runnable>

	<h3>Implicit 'else'</h3>

	<p>
		When the <code class="keyword">else</code> case of an <code class="keyword">if</code> would be <code>()</code>,
		it may be omitted.
		<br />
		For example, this is useful for <code class="struct">void</code>
		which has <code>()</code> as the only possible value, or for arrays where <code>()</code> is an empty array.
	</p>

	<h3>'unless'</h3>

	<p>
		<code>unless condition</code> is the same as <code>if !condition</code>.
		<br />
		An <code>unless</code> can't have an explicit <code>else</code>,
		since you could just use an <code>if</code> in that case.
	</p>

	<h3>inline 'if'</h3>

	<p>
		Simple ifs can be written in one line using <code>?</code> and <code>:</code> like in C.
		<br />
		<code>a.head.is-vowel ? "an {a}" : "a {a}"</code> is equivalent to:
	</p>
	<crow-runnable>
		f string()
			if a.head is-vowel
				"an {a}"
			else
				"a {a}"
	</crow-runnable>

	<p>
		The <code class="keyword">:</code> (equivalent to <code class="keyword">else</code>) is still optional.
		<br />
		<code>a.head.is-vowel ? (a.head.to-str,)</code> is equivalent to:
	</p>
	<crow-runnable>
		f string?()
			if a.head is-vowel
				a.head.to-str,
	</crow-runnable>
</section>
