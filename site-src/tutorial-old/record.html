<section>
	<h2>declaring records</h2>
	<p>A record is a value that stores several other values by name.</p>
	<crow-runnable>
		main nat^(_ string[]) summon
			a bird = "crow", "cap"
			b bird = "seagull", "stetson"
			info log "{a} mix {b} = {a mix b}"
			()

		bird record
			species string
			hat string

		mix bird(a bird, b bird)
			a.species, b.hat

		to string(a bird)
			"{a species} in a {a hat}"
	</crow-runnable>
	<p>
		The above program defines a record type <code class="struct">bird</code> with two fields,
		<code class="field">species</code> and <code class="field">hat</code>.
	</p>
	<p>
		Declaring the <code class="keyword">record</code> generates a function
		<code class="fun">new</code> for creating the record.
		<br />
		It also generates functions <code class="fun">species</code> and <code class="fun">hat</code>
		for getting field values from a record value.
	</p>
	<p>
		<code>new</code> is called like <code>"crow", "cap"</code>.
		The type annotation <code class="struct">bird</code> in <code>a bird = "crow", "cap"</code> is required
		because otherwise we don't know what <code>new</code> function is being called.
		<br />
		(<code>a str[]</code> or <code>a pair&lt;str, str></code> would also compile,
		since those types also have <code class="fun">new</code> that can take 2 strings.)
	</p>
</section>
<section>
	<h2>'mut' fields</h2>
	<p>
		A field can be made mutable by adding the <code class="keyword">mut</code> keyword
		after its name and before its type.
	</p>
	<crow-runnable>
		main nat^(_ string[]) summon
			a bird = "crow", "cap"
			b bird = "seagull", "stetson"
			info log "{a} :: {b}"
			a steal-hat b
			info log "{a} :: {b}"
			()

		bird record mut
			species string
			hat mut string

		steal-hat void(a bird, b bird)
			a.hat := "{a hat} and {b hat}"
			b.hat := "missing hat"

		to string(a bird)
			"{a species} in a {a hat}"
	</crow-runnable>
	<p>
		Specifying <code class="keyword">mut</code> in <code>hat mut str</code>
		generates a function <code class="fun">set-hat</code>
		called like <code>b.hat := "missing hat"</code>.
		<br />
		(It still also generates getter <code class="fun">hat</code>.)
	</p>
	<p>
		Since the field <code class="field">hat</code> is <code class="keyword">mut</code>,
		the record <code class="struct">bird</code> must be marked <code class="keyword">mut</code> too.
		<br />
		This would recursively apply to any type containing <code class="struct">bird</code>.
		<br />
		The reason why will be explained in <a href="./fut.html">fut</a>.
	</p>
</section>
