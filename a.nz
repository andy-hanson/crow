import
	io
	posix

test-it int32() summon unsafe
	tag = new<jmp-buf-tag> zero, zero, zero
	jmp-buf = as<jmp-buf>: tag ptr-to
	a = jmp-buf setjmp
	when
		a == zero
			jmp-buf longjmp one
			todo
		else
			a

main fut exit-code(args arr str) summon trusted
	print-sync: test-it to-str
	c = catch: {fail<void>: "message"}
	match c
		ok
			unreachable
		err e
			ex = as<exception>: e.value
			print-sync: "caught it: " + ex.message
	0 resolved
