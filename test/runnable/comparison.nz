import
	io: exit-code print-sync

my-record record
	x nat
	y nat

my-byref-record record
	by-ref
	x nat
	y nat

my-other-record record

my-union union
	my-record
	my-other-record

test-compare-records void() summon
	a = my-record: 1, 2
	b = my-record: 1, 3
	c = my-record: 1, 2
	d = my-record: 0, 3
	print-sync: a <=> b to-str
	print-sync: a <=> c to-str
	print-sync: a <=> d to-str

test-compare-byref-records void() summon
	a = my-byref-record: 1, 2
	b = my-byref-record: 1, 3
	c = my-byref-record: 1, 2
	d = my-byref-record: 0, 3
	print-sync: a <=> b to-str
	print-sync: a <=> c to-str
	print-sync: a <=> d to-str

test-compare-unions void() summon
	a = as<my-union>: my-record: 1, 2
	b = as<my-union>: my-other-record
	c = as<my-union>: my-record: 1, 2
	d = as<my-union>: my-record: 1, 1

	print-sync: a <=> b to-str
	print-sync: a <=> c to-str
	print-sync: a <=> d to-str

main fut exit-code(args arr str) summon
	test-compare-records
	test-compare-byref-records
	test-compare-unions
	resolved: 0
