import
	crow/io/print: out, print

main nat^(_ string[]) summon
	trusted
		# TODO: we need type annotations on LHS of '<-'
		results <- (0 .. 100).parallel for-loop@(nat, nat range, nat) x =>
			*foo := x
			*foo := *foo + 1
			*foo,
		results is for x : 1 .. 101; x
		out print "{results[99]}"
		()

foo nat64 mut*() thread-local
